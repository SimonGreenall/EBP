define(function(t,o,n){var e,i,a,r;r=function(){var t=this,o=function(o,n,e,i){t.post.apply(t,arguments)};return o.ajax=function(){return t.ajax.apply(t,arguments)},o.post=function(){return t.post.apply(t,arguments)},o.get=function(){return t.get.apply(t,arguments)},o.error=function(){return t.error.apply(t,arguments)},o.confirm=function(){return t.confirm.apply(t,arguments)},o.alert=function(){return t.alert.apply(t,arguments)},o.loading=function(){return t.loading.apply(t,arguments)},o.error=function(){return t.error.apply(t,arguments)},o.uncover=function(){return t.uncover.apply(t,arguments)},o.close=function(){return t.close.apply(t,arguments)},o},r.fn=r.prototype={ajax:function(t,o,n,e,i){return t&&"string"==typeof t?("function"==typeof o&&(n&&(i=e,e=n),n=o,o={}),new a(t,o,n,e||"get",i)):!1},post:function(t,o,n,e){this.ajax(t,o,n,"post",e)},get:function(t,o,n,e){this.ajax(t,o,n,"get",e)},error:function(t){if("function"==typeof t)t=[t];else if(!(t instanceof Array))return!1;i.errors=i.errors.concat(t)},confirm:function(t,o){return this.alert(t,o,!0),this},alert:function(t,o,n,r){return t&&(o=o||"",r||(a.fn.items++,a.fn.dlgItems[a.fn.items]={title:t,str:o,isSuccess:n,self:this}),e.cover(),i.modal.title.html(t),i.modal.text.html(o),e.switchDialogType("display"),e.dialogDisplay(),i.modal.icon[(n?"add":"remove")+"Class"]("icon-ok"),i.modal.btn.text(n?"确定":"关闭")),this},loading:function(t){return t=t||"加载中...",this.alert(t),e.switchDialogType("loading"),this},errorAlert:function(t){return t=t||"加载失败...",this.alert(t),e.switchDialogType("error"),this},uncover:function(){e.uncover()},close:function(t,o){return t?e.mytimer=setTimeout(function(){e.dialogClose()},t):e.dialogClose(),"function"==typeof o&&o(),this}},r.fn.constructor=r,a=function(t,o,n,a,r){r=e.getOpts(r);var s=this,c={type:a,url:t+(/\?/.test(t)?"&":"?")+(new Date).getTime(),data:o,beforeSend:function(t){if(r.header)for(var o in r.header)t[o]=r.header[o]},success:function(t){"string"==typeof t&&(t=$.parseJSON(t)),--s.items||e.uncover();for(var o=r.errors.length;o--;)if(void 0!==r.errors[o](t))return!1;n&&n(t)},error:function(t){},dataType:"json",timeout:r.timeout};this.items++,i.displayLoading&&e.cover(),$.ajax(c)},a.fn=a.prototype,a.fn.dlgItems={},a.fn.items=0,e={cover:function(){i.modal.cover.css({height:$(document.body).height()}).show()},uncover:function(){i.modal.cover.hide()},getOpts:function(t){return t&&"object"==typeof t?function(t){return t.timeout=t.timeout||i.timeout,t.header&&(t.header=$.extend(i.header,t.header)),t}(t):$.extend(i)},dialogClose:function(){e.mytimer&&clearTimeout(e.mytimer);var t;--a.fn.items?(t=a.fn.dlgItems[a.fn.items],t.self.alert(t.title,t.str,t.isSuccess,!0)):(e.uncover(),i.modal.dialog.hide())},dialogEvent:function(){i.modal.dialog.find("[func='close']").on("click",function(){e.dialogClose()})},switchDialogType:function(t){var o={display:1,error:1,loading:1};t=o[t]?t:"error",i.modal.dialog.find(".c-post-dialog-content").each(function(){var o=$(this);o.attr("func")==t?o.removeClass("hidden"):o.addClass("hidden")})},getDialog:function(){var t=$("<div class='c-post-dialog'>								<div class='c-post-dialog-container'>									<div class='c-post-dialog-cover'></div>									<div class='c-post-dialog-body'>										<h3><span class='close' func='close'>x</span></h3>										<div class='c-post-dialog-content hidden' func='display'>											<p class='c-post-dialog-icon f-center border-btm'><i func='icon'></i><span func='title'>输入错误</span></p>											<p class='f-center m-btm-medium' func='text'></p>											<p class='f-center'><a class='ui-button secondary large' func='close'>关闭</a></p>										</div>										<div class='c-post-dialog-content s-loading space hidden' func='loading'>											<span func='title'>信息正在保持中...</span>										</div>										<div class='c-post-dialog-content s-warning space hidden' func='error'>											<span><b func='title'>加载失败~</b><a href='javascript:;'' role='button' rel='nofollow'>立即刷新</a></span>										</div>									</div>								</div>							</div>");return $(document.body).append(t),t},dialogDisplay:function(){var t,o=$(document.body);i.modal.cover.height(o.height()),i.modal.dialog.show(),i.modal.display||(i.modal.display=!0,t=o.width(),i.modal.dialog.css({left:(t-i.modal.dialog.width())/2,top:"50%",marginTop:-i.modal.dialog.outerHeight()/2}))},getCover:function(){var t=$("<div>",{"class":"c-post-cover"});return $(document.body).append(t),t},config:function(){i={modal:{cover:e.getCover(),dialog:e.getDialog(),display:0,title:0,text:0,btn:0,icon:0},header:{},errors:[],timeout:2e4,displayLoading:!1},i.modal.title=i.modal.dialog.find("[func='title']"),i.modal.text=i.modal.dialog.find("[func='text']"),i.modal.icon=i.modal.dialog.find("[func='icon']"),i.modal.btn=i.modal.dialog.find(".ui-button"),e.dialogEvent()}},e.config(),o.post=new r});